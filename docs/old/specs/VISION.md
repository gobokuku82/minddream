# Dream Agent 비전

> **버전**: 0.2.0
> **최종 수정**: 2026-02-05
> **상태**: Phase 0.5 + Phase 1 완료 반영

---

## 한 줄 정의

**AI 도입이 어려운 기업을 위한 맞춤형 에이전트 플랫폼**

---

## 핵심 가치

### 1. 기업 암묵지의 자산화

```
기업의 암묵지 (업무 노하우, 의사결정 패턴)
        ↓ 패턴화
    학습 데이터 (쿼리 + 작업 과정)
        ↓ RLHF (결과 평가)
    맞춤형 AI 에이전트
        ↓ 미래
    sLLM (자체 소형 모델)
```

### 2. LLM 발전과 독립적

- 오픈소스 LLM이 발전하면 → 기존 학습 데이터로 재학습
- LLM 교체 가능 (OpenAI → Claude → 오픈소스)
- **플랫폼 가치 = 축적된 학습 데이터**

### 3. 기업별 완전 맞춤화

| 항목 | 맞춤화 가능 |
|------|-------------|
| 사용자 유형 | 비개발자 / 개발자 / 혼합 |
| 출력 포맷 | 텍스트 / 이미지 / PDF / 영상 |
| 데이터 저장소 | 로컬 / 클라우드 / 온프레미스 |
| LLM 제공자 | OpenAI / Claude / 오픈소스 |
| Domain Agent | 기업 업무에 맞게 개발 |

---

## 아키텍처

### 4-Layer Hand-off 구조

```
┌─────────────────────────────────────────────────────────────────┐
│                         사용자 입력                              │
└─────────────────────────────────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Layer 1: Cognitive                                              │
│  - 사용자 의도 파악                                               │
│  - 원하는 결과가 무엇인지 구체화                                   │
│  - 완전한 권한 위임 (hand-off) →                                  │
└─────────────────────────────────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Layer 2: Planning                                               │
│  - 실행 에이전트 선택                                             │
│  - 결과 달성을 위한 방법 추론                                      │
│  - Plan + Todo 생성                                              │
│  - 완전한 권한 위임 (hand-off) →                                  │
└─────────────────────────────────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Layer 3: Execution                                              │
│  - Plan에 따라 실행 에이전트 조율                                  │
│  - 작업 수행 및 결과 수집                                         │
│  - 완전한 권한 위임 (hand-off) →                                  │
└─────────────────────────────────────────────────────────────────┘
                               │
                               ▼
┌─────────────────────────────────────────────────────────────────┐
│  Layer 4: Response                                               │
│  - 출력 포맷 결정 (텍스트/이미지/PDF/영상)                         │
│  - 결과 생성 및 반환                                              │
└─────────────────────────────────────────────────────────────────┘

                    ┌─────────────────┐
                    │      HITL       │
                    │  (언제든 개입)   │
                    │ pause / modify  │
                    │ delete / verify │
                    └─────────────────┘
                           ↑
              사용자가 모든 단계에서 개입 가능
```

### 핵심 컴포넌트

| 컴포넌트 | 역할 |
|----------|------|
| Send API | 요청 전송 |
| Command API | 명령 실행 |
| Hand-off | Layer 간 완전 권한 위임 |
| HITL | 사용자 개입 (pause/modify/delete/verify) |

### Tech Stack

| 분류 | 기술 |
|------|------|
| Orchestration | LangGraph 1.0.5+ |
| Backend | FastAPI |
| Realtime | WebSocket |
| Frontend | React / Next.js |
| LLM | OpenAI (설정 가능) |

---

## HITL (Human-in-the-Loop)

### 기능

| 기능 | 설명 |
|------|------|
| Pause | 언제든 작업 일시 정지 |
| Modify | Todo 수정 |
| Delete | Todo 삭제 |
| Verify | LLM에게 현재 작업 검증 요청 |

### 사용자 권한

- 모든 Layer에서 개입 가능
- 실행 중인 작업도 중단 가능
- Plan 수정 후 재실행 가능

---

## 학습 시스템 (미래)

### Phase 1: 로깅 (현재)

```
모든 세션 → callback/log → 저장
(학습 데이터 축적)
```

### Phase 2: 피드백 수집

```
작업 결과 → 사용자/관리자 평가 → RLHF 데이터
```

### Phase 3: Fine-tuning

```
축적된 데이터 → 모델 Fine-tuning → 맞춤형 모델
```

### Phase 4: sLLM (장기)

```
오픈소스 LLM + 기업 데이터 → 자체 sLLM
```

---

## Domain Agent

### 현재 상태

- `domain/` 폴더의 Agent들은 **구현 샘플/템플릿**
- 실제 기업에는 맞춤 Agent 개발

### 예시 (템플릿)

| Agent | 용도 |
|-------|------|
| web_scraper | 웹 데이터 수집 |
| data_analyzer | 데이터 분석 |
| report_generator | 리포트 생성 |
| ... | ... |

---

## 설계 원칙

### 1. 추상화 우선

```python
# 저장소 예시
class StorageInterface:
    def save(self, data): ...
    def load(self, key): ...

# 구현체는 교체 가능
LocalStorage(StorageInterface)
CloudStorage(StorageInterface)
EnterpriseStorage(StorageInterface)
```

### 2. 설정 외부화

```
.env 또는 배포 설정으로:
- LLM 제공자
- 저장소 유형
- 보안 설정
```

### 3. 보안 최우선

- 학습 데이터 = 기업 핵심 자산
- 저장소 선택은 보안과 직결
- 기업별 보안 요구사항 충족 필요

---

## 현재 단계

### 집중 영역

| 영역 | 상태 | 비고 |
|------|------|------|
| 4-Layer 파이프라인 | 완료 | Phase 0 |
| models/schemas 분리 | 완료 | Phase 0.5 |
| Hand-off 구현 (Command 패턴) | 완료 | Phase 1 (WB-03) |
| Intent Enum 통일 (SSOT) | 완료 | WB-04 |
| Checkpointer 연결 (PostgreSQL) | 완료 | WB-01 |
| 세션/비즈니스 데이터 영속화 | 완료 | WB-06, WB-07 (JSON) |
| HITL 기능 | 기본 구현 | pause/resume 동작 |
| WebSocket 통신 | 구현됨 | Todo 상태 실시간 전송 |
| 저장소 추상화 | 완료 | Repository 패턴 (JSON → Redis/DB 교체 가능) |

### 다음 작업

1. AgentState 필드 정리 (execution_result 추가)
2. 테스트 커버리지 확보
3. 대시보드 연동 강화
4. 학습 데이터 수집 파이프라인

---

## 성공 기준

### Beta (현재)

- [x] 전체 흐름 정상 동작 (hello → 응답, ML 분석 → 응답)
- [x] Hand-off 패턴 동작 (Command 기반 라우팅)
- [x] 세션 데이터 저장/복구 (JSON 파일)
- [ ] HITL 모든 기능 동작
- [ ] 에러 발생 시 graceful 처리
- [ ] 테스트 커버리지 70% 이상

---

## 미결정 사항

| 항목 | 상태 | 결정 시점 |
|------|------|-----------|
| 비즈니스 모델 | 미정 | 추후 |
| 테스트 완료 기준 | 미정 | 인프라 안정화 후 |
| 학습 데이터 수집 방식 | 미정 | callback/log 구현 후 |
| RLHF 평가 방식 | 미정 | 기업별 상이 |

---

## 참고 문서

- [ZERO_BASE_GUIDE.md](../ZERO_BASE_GUIDE.md) - 문서 작성 순서
- [SYSTEM_ARCHITECTURE.md](../SYSTEM_ARCHITECTURE.md) - 상세 아키텍처
- [README/03_AGENT_LAYERS.md](../../README/03_AGENT_LAYERS.md) - 4-Layer 상세

---

*이 문서는 토론을 통해 작성되었으며, 검토 후 확정됩니다.*
