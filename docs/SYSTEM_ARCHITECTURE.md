# Dream Agent ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> **ë¬¸ì„œ ìƒíƒœ ë²”ë¡€**
> - âœ… êµ¬í˜„ ì™„ë£Œ
> - âš ï¸ ë¶€ë¶„ êµ¬í˜„ / ê²€í†  í•„ìš”
> - âŒ ë¯¸êµ¬í˜„
> - ğŸ”§ ì‚¬ìš©ì ê²°ì • í•„ìš”

## 1. ê°œìš”

Dream AgentëŠ” 4-Layer Hand-off ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
LangGraph StateGraphë¥¼ í™œìš©í•˜ì—¬ ê° ë ˆì´ì–´ ê°„ ìƒíƒœ ì „ì´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

## 2. ì‹œìŠ¤í…œ êµ¬ì¡° âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Dashboard (Web UI)                        â”‚
â”‚                   WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Backend API                              â”‚
â”‚                    FastAPI + LangGraph                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tool System  â”‚      â”‚ Domain Agents â”‚      â”‚   LLM Layer   â”‚
â”‚  (YAML ê¸°ë°˜)  â”‚      â”‚  (ë¹„ì¦ˆë‹ˆìŠ¤)   â”‚      â”‚  (OpenAI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. 5-Layer Hand-off ì•„í‚¤í…ì²˜ âœ…

### 3.1 ë ˆì´ì–´ êµ¬ì¡° (ì‹¤ì œ êµ¬í˜„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Cognitive Layer (ì¸ì§€)                       â”‚
â”‚  - ì‚¬ìš©ì ì…ë ¥ ë¶„ì„                                              â”‚
â”‚  - Intent ì¶”ì¶œ (IntentDomain + IntentCategory)                  â”‚
â”‚  - ì—”í‹°í‹° ì¸ì‹                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Intent, Entities
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Planning Layer (ê³„íš)                        â”‚
â”‚  - Todo ë¦¬ìŠ¤íŠ¸ ìƒì„±                                              â”‚
â”‚  - ì‹¤í–‰ ìˆœì„œ ê²°ì •                                                â”‚
â”‚  - ë„êµ¬ ì„ íƒ                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Plan, TodoItems
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ML Execution Layer (ML ì‹¤í–‰)                   â”‚
â”‚  - ê°ì„± ë¶„ì„, í‚¤ì›Œë“œ ì¶”ì¶œ ë“± ML ì‘ì—…                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Biz Execution Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ì‹¤í–‰)             â”‚
â”‚  - ë¦¬í¬íŠ¸ ìƒì„±, ëŒ€ì‹œë³´ë“œ, ì½˜í…ì¸  ìƒì„±                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ ExecutionResults
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Response Layer (ì‘ë‹µ)                        â”‚
â”‚  - ê²°ê³¼ ì¢…í•©                                                     â”‚
â”‚  - ì‚¬ìš©ì ì‘ë‹µ ìƒì„±                                              â”‚
â”‚  - ë‹¤ìŒ ì•¡ì…˜ ì œì•ˆ                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ë ˆì´ì–´ ëª©ë¡ (TodoItem.layer ê¸°ì¤€) âœ…

| ë ˆì´ì–´ | ì„¤ëª… | ìƒíƒœ |
|--------|------|------|
| `cognitive` | ì¸ì§€/ì˜ë„ ë¶„ì„ | âœ… |
| `planning` | ê³„íš ìˆ˜ë¦½ | âœ… |
| `ml_execution` | ML ë¶„ì„ ì‹¤í–‰ | âœ… |
| `biz_execution` | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ | âœ… |
| `response` | ì‘ë‹µ ìƒì„± | âœ… |

### 3.3 ë°ì´í„° íë¦„ âœ…

```
User Input
    â”‚
    â–¼
CognitiveInput â”€â”€â–º Cognitive Layer â”€â”€â–º CognitiveOutput
                                            â”‚
                                            â–¼
                   PlanningInput â—„â”€â”€ Intent, Entities
                        â”‚
                        â–¼
                   Planning Layer â”€â”€â–º PlanningOutput
                                            â”‚
                                            â–¼
                   ExecutionInput â—„â”€â”€ Plan, TodoItems
                        â”‚
                        â”œâ”€â”€â–º ML Execution â”€â”€â–º ExecutionOutput
                        â”‚
                        â””â”€â”€â–º Biz Execution â”€â”€â–º ExecutionOutput
                                            â”‚
                                            â–¼
                   ResponseInput â—„â”€â”€ ExecutionResults
                        â”‚
                        â–¼
                   Response Layer â”€â”€â–º ResponseOutput
                                            â”‚
                                            â–¼
                                      User Response
```

## 4. í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 4.1 LangGraph StateGraph âœ…

> ì‹¤ì œ ìœ„ì¹˜: `orchestrator/builder.py` (graph/ í´ë” ì•„ë‹˜)

```python
# ìƒíƒœ ê·¸ë˜í”„ ì •ì˜
workflow = StateGraph(AgentState)

# ë…¸ë“œ ì¶”ê°€
workflow.add_node("cognitive", cognitive_node)
workflow.add_node("planning", planning_node)
workflow.add_node("ml_execution", ml_execution_node)
workflow.add_node("biz_execution", biz_execution_node)
workflow.add_node("response", response_node)
```

### 4.2 Tool System (Phase 0-3) âœ…

| Phase | ê¸°ëŠ¥ | íŒŒì¼ | ìƒíƒœ |
|-------|------|------|------|
| Phase 0 | YAML ê¸°ë°˜ Tool Discovery | `tools/discovery.py`, `tools/loader.py` | âœ… |
| Phase 1 | ToolSpec â†” BaseTool í˜¸í™˜ | `tools/compat.py` | âœ… |
| Phase 2 | Hot Reload, Domain Agent | `tools/hot_reload.py`, `execution/domain/` | âœ… |
| Phase 3 | Validator, Schema ê²€ì¦ | `tools/validator.py` | âœ… |

### 4.3 Domain Agents âœ…

```
execution/domain/
â”œâ”€â”€ base_agent.py           # âœ… BaseDomainAgent ì¶”ìƒ í´ë˜ìŠ¤
â”œâ”€â”€ collection/
â”‚   â”œâ”€â”€ collector/          # âœ… collector_agent.py
â”‚   â””â”€â”€ preprocessor/       # âœ… preprocessor_agent.py
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ sentiment/          # âœ… sentiment_analyzer_agent.py
â”‚   â”œâ”€â”€ keyword/            # âœ… keyword_extractor_agent.py
â”‚   â”œâ”€â”€ hashtag/            # âœ… hashtag_analyzer_agent.py
â”‚   â”œâ”€â”€ classifier/         # âœ… problem_classifier_agent.py
â”‚   â”œâ”€â”€ competitor/         # âœ… competitor_analyzer_agent.py
â”‚   â””â”€â”€ trends/             # âœ… google_trends_agent.py
â”œâ”€â”€ insight/
â”‚   â””â”€â”€ insight_generator/  # âœ… insight_generator_agent.py
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ video/              # âœ… video_agent_graph.py
â”‚   â””â”€â”€ ad_creative/        # âš ï¸ __init__.pyë§Œ ì¡´ì¬
â”œâ”€â”€ report/
â”‚   â””â”€â”€ report_agent/       # âœ… report_agent_graph.py
â”œâ”€â”€ ops/
â”‚   â””â”€â”€ inventory/          # âš ï¸ __init__.pyë§Œ ì¡´ì¬
â””â”€â”€ toolkit/                # âœ… ê³µìš© ìœ í‹¸ë¦¬í‹°
```

## 5. ë””ë ‰í† ë¦¬ êµ¬ì¡° (ì‹¤ì œ) âœ…

```
backend/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ agent.py              # âœ… API ë¼ìš°íŠ¸
â”‚   â””â”€â”€ schemas/                  # âœ… API ìŠ¤í‚¤ë§ˆ
â”‚
â”œâ”€â”€ app/
â”‚   â””â”€â”€ dream_agent/
â”‚       â”œâ”€â”€ cognitive/            # âœ… Cognitive Layer
â”‚       â”‚   â”œâ”€â”€ cognitive_node.py
â”‚       â”‚   â”œâ”€â”€ intent_classifier.py
â”‚       â”‚   â”œâ”€â”€ intent_types.py
â”‚       â”‚   â”œâ”€â”€ language_detector.py
â”‚       â”‚   â””â”€â”€ dialogue_manager.py
â”‚       â”‚
â”‚       â”œâ”€â”€ planning/             # âœ… Planning Layer
â”‚       â”‚   â”œâ”€â”€ tool_catalog.py
â”‚       â”‚   â””â”€â”€ __init__.py
â”‚       â”‚
â”‚       â”œâ”€â”€ execution/            # âœ… Execution Layer
â”‚       â”‚   â”œâ”€â”€ domain/           # Domain Agents
â”‚       â”‚   â””â”€â”€ core/             # ì‹¤í–‰ ì½”ì–´
â”‚       â”‚
â”‚       â”œâ”€â”€ response/             # âœ… Response Layer
â”‚       â”‚   â””â”€â”€ response_node.py
â”‚       â”‚
â”‚       â”œâ”€â”€ orchestrator/         # âœ… LangGraph ì •ì˜ (graph/ ì•„ë‹˜)
â”‚       â”‚   â”œâ”€â”€ builder.py        # StateGraph ë¹Œë”
â”‚       â”‚   â”œâ”€â”€ router.py         # ë¼ìš°íŒ… ë¡œì§
â”‚       â”‚   â””â”€â”€ checkpointer.py   # ì²´í¬í¬ì¸íŠ¸
â”‚       â”‚
â”‚       â”œâ”€â”€ tools/                # âœ… Tool System
â”‚       â”‚   â”œâ”€â”€ discovery.py
â”‚       â”‚   â”œâ”€â”€ loader.py
â”‚       â”‚   â”œâ”€â”€ compat.py
â”‚       â”‚   â”œâ”€â”€ hot_reload.py
â”‚       â”‚   â”œâ”€â”€ validator.py
â”‚       â”‚   â”œâ”€â”€ base_tool.py
â”‚       â”‚   â”œâ”€â”€ tool_registry.py
â”‚       â”‚   â””â”€â”€ definitions/      # YAML ì •ì˜ (18ê°œ)
â”‚       â”‚
â”‚       â”œâ”€â”€ models/               # âœ… Pydantic ëª¨ë¸
â”‚       â”œâ”€â”€ schemas/              # âœ… I/O ìŠ¤í‚¤ë§ˆ
â”‚       â”œâ”€â”€ states/               # âœ… LangGraph ìƒíƒœ
â”‚       â”œâ”€â”€ llm_manager/          # âœ… LLM í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ callbacks/            # âœ… WebSocket ì½œë°±
â”‚       â””â”€â”€ workflow_manager/     # âœ… ì›Œí¬í”Œë¡œìš° ê´€ë¦¬
â”‚
dashboard/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html                # âœ… 3-Panel Layout
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ js/app.js                 # âœ… WebSocket Client
â”‚   â””â”€â”€ css/style.css             # âœ… ìŠ¤íƒ€ì¼
â””â”€â”€ app.py                        # âš ï¸ Flask ì„œë²„ (í™•ì¸ í•„ìš”)
```

## 6. ê¸°ìˆ  ìŠ¤íƒ âœ…

| ì˜ì—­ | ê¸°ìˆ  | ìƒíƒœ |
|------|------|------|
| Backend Framework | FastAPI | âœ… |
| Workflow Engine | LangGraph (StateGraph) | âœ… |
| LLM | OpenAI GPT-4 | âœ… |
| Validation | Pydantic v2 | âœ… |
| Dashboard | Flask + WebSocket | âš ï¸ |
| ì‹¤ì‹œê°„ í†µì‹  | WebSocket | âœ… |
| ì„¤ì • ê´€ë¦¬ | YAML | âœ… |
| í…ŒìŠ¤íŠ¸ | pytest | âš ï¸ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸ í•„ìš” |

## 7. í™•ì¥ í¬ì¸íŠ¸ âœ…

### 7.1 ìƒˆ ë„êµ¬ ì¶”ê°€
1. `tools/definitions/`ì— YAML íŒŒì¼ ì¶”ê°€
2. Hot Reloadê°€ ìë™ ê°ì§€
3. ToolValidatorê°€ ê²€ì¦

### 7.2 ìƒˆ Domain Agent ì¶”ê°€
1. `BaseDomainAgent` ìƒì†
2. `DomainAgentRegistry`ì— ë“±ë¡
3. `execute()` ë©”ì„œë“œ êµ¬í˜„

### 7.3 ìƒˆ ë ˆì´ì–´ ì¶”ê°€
1. `schemas/`ì— Input/Output ìŠ¤í‚¤ë§ˆ ì •ì˜
2. `orchestrator/router.py`ì— ì „ì´ ë¡œì§ ì¶”ê°€
3. `orchestrator/builder.py`ì— ë…¸ë“œ ë“±ë¡

---

## ğŸ”§ ì‚¬ìš©ì ê²°ì • í•„ìš” ì‚¬í•­

| í•­ëª© | ì„¤ëª… | ì˜µì…˜ |
|------|------|------|
| ì„¸ì…˜ ì €ì¥ì†Œ | í˜„ì¬ In-memory (agent.py:13) | Redis / PostgreSQL / In-memory |
| Dashboard ì„œë²„ | Flask vs FastAPI í†µí•© | ë¶„ë¦¬ ìœ ì§€ / FastAPI í†µí•© |
| í…ŒìŠ¤íŠ¸ ì „ëµ | í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ | 50% / 70% / 90% |
